from datetime import date  # можно использовать и datetime с более специфическими параметрами

# Описание задачи по её названию
GET_DESCRIPTIONS = """Проанализируй задачу пользователя и создай подробное описание её выполнения.
Твоя цель:
1. Определи суть задачи и её конечную цель
2. Выдели ключевые этапы выполнения
3. Укажи важные детали и возможные подводные камни
4. Предложи конкретные шаги для реализации
Формат ответа:
- Краткое описание задачи (1-2 предложения)
- Основные этапы выполнения (3-5 пунктов)
- Важные моменты, которые нужно учесть
Пиши конкретно и практично. Избегай общих фраз. Отвечай на языке, на котором задача была сформулирована."""


# определение дедлайна
def dedline_prompt(task_title: str, task_description: str) -> str:
    today = date.today().strftime("%Y-%m-%d")

    return f"""Сегодняшняя дата: {today}
        Задача: {task_title}\n
        Описание: {task_description}
        Оцени время выполнения этой задачи и предложи реалистичный дедлайн (deadline).
        Сделай также обоснование дедлайна (reasoning).
        Ответ должен быть обязательно в формате json
        """


# определение приоритета
def priority_prompt(task_title: str, task_description: str) -> str:

    return f""" Оцени приоритет задачи, используя ее описание и руководствуясь общими принципами целесообразности и приортитета.
        Задача: {task_title}\n
        Описание: {task_description}
        Приоритет (priority) может быть разделен на 3 ступени: ['low', 'medium', 'high'].
        Сделай также обоснование выбора приоритета (reasoning).
        Ответ должен быть обязательно в формате json
        """

# определение приоритета
def category_prompt(task_title: str, task_description: str) -> str:

    return f""" Оцени категорию задачи и создай теги(tags).
        Задача: {task_title}\n
        Описание: {task_description}
        Категория (category) может быть разделена на 5 ступеней: ['bug', 'feature', 'improvement', 'docs', 'test'].
        Ответ должен быть обязательно в формате json
        """


def process_task_prompt(task_title: str) -> str:
    today = date.today().strftime("%Y-%m-%d")
    
    return f"""Сегодняшняя дата: {today}
        Задача: {task_title}
        Проанализируй задачу комплексно и верни структурированный ответ:
        1. description - подробное описание задачи и шаги её выполнения
        2. priority - оцени приоритет (low/medium/high) исходя из важности и срочности
        3. deadline - предложи реалистичный дедлайн в формате YYYY-MM-DD
        4. category - определи категорию (bug/feature/improvement/docs/test)
        5. tags - добавь 2-4 релевантных тега
        Будь конкретен и практичен."""