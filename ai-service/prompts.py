from datetime import date


TODAY = date.today().strftime("%Y-%m-%d")
DESCRIPTION_PROMPT = """Проанализируй задачу пользователя и создай подробное описание её выполнения.
Твоя цель:
1. Определи суть задачи и её конечную цель
2. Выдели ключевые этапы выполнения
3. Укажи важные детали и возможные подводные камни
4. Предложи конкретные шаги для реализации
Формат ответа:
- Краткое описание задачи (1-2 предложения)
- Основные этапы выполнения (3-5 пунктов)
- Важные моменты, которые нужно учесть
Пиши конкретно и практично. Избегай общих фраз. Отвечай на языке, на котором задача была сформулирована."""


def deadline_prompt(task_title: str, task_description: str) -> str:
    """Генерирует промпт для определения дедлайна задачи."""
    return f"""Сегодняшняя дата: {TODAY}
Задача: {task_title}
Описание: {task_description}
Оцени время выполнения этой задачи и предложи реалистичный дедлайн (deadline).
Сделай также обоснование дедлайна (reasoning)."""


def priority_prompt(task_title: str, task_description: str) -> str:
    """Генерирует промпт для определения приоритета задачи."""
    return f"""Оцени приоритет задачи, руководствуясь принципами срочности и важности.
Задача: {task_title}
Описание: {task_description}
Приоритет (priority): low, medium или high.
Сделай также обоснование выбора приоритета (reasoning)."""


def category_prompt(task_title: str, task_description: str) -> str:
    """Генерирует промпт для категоризации задачи."""
    return f"""Определи категорию задачи и создай теги.
Задача: {task_title}
Описание: {task_description}
Категории: bug, feature, improvement, docs, test.
Добавь 2-4 релевантных тега (tags)."""


def process_task_prompt(task_title: str) -> str:
    """Генерирует промпт для комплексного анализа задачи."""
    return f"""Сегодняшняя дата: {TODAY}
Задача: {task_title}
Проанализируй задачу комплексно и верни:
1. description - подробное описание задачи и шаги выполнения
2. priority - приоритет (low/medium/high) исходя из важности и срочности
3. deadline - реалистичный дедлайн в формате YYYY-MM-DD
4. category - категория (bug/feature/improvement/docs/test)
5. tags - 2-4 релевантных тега
Будь конкретен и практичен."""
